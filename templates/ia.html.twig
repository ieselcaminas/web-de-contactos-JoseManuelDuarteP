{% extends 'base.html.twig' %}

{% block title %}Asistente IA en Symfony{% endblock %}

{% block body %}
    <div class="container my-4">
        <h1 class="text-center mb-4">Asistente IA en Symfony</h1>

        <div class="chat border rounded p-3 mb-3 bg-light" style="height: 300px; overflow-y: auto;">
            {% for msg in messages %}
                {% if msg.role != 'system' %}
                    <p>
                        <strong class="{{ msg.role }}">
                            {{ msg.role|capitalize }}:
                        </strong>
                        {{ msg.content|nl2br }}
                    </p>
                {% endif %}
            {% endfor %}
        </div>

        <form method="post" action="{{ path('ia') }}" class="d-flex">
            <input
                type="text"
                name="prompt"
                class="form-control me-2"
                autocomplete="off"
                placeholder="Escribe tu mensaje aquÃ­..."
                value="{{ userMessage|default('') }}"
                required
            />
            <button type="submit" class="btn btn-primary">Enviar</button>
        </form>
    </div>
{% endblock %}
